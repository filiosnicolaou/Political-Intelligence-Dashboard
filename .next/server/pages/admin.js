"use strict";(()=>{var e={};e.id=964,e.ids=[964],e.modules={7585:(e,r,t)=>{t.r(r),t.d(r,{config:()=>_,default:()=>g,getServerSideProps:()=>S,getStaticPaths:()=>b,getStaticProps:()=>h,reportWebVitals:()=>v,routeModule:()=>q,unstable_getServerProps:()=>N,unstable_getServerSideProps:()=>w,unstable_getStaticParams:()=>f,unstable_getStaticPaths:()=>j,unstable_getStaticProps:()=>P});var s={};t.r(s),t.d(s,{default:()=>Admin,getServerSideProps:()=>getServerSideProps});var a=t(7093),i=t(5244),n=t(1323),l=t(1207),d=t(5913),o=t(997),c=t(8755),p=t(4802),m=t(9344),u=t.n(m),x=t(3717);function Admin({user:e,party:r}){return o.jsx(c.Z,{party:r,children:(0,o.jsxs)("div",{className:"max-w-4xl mx-auto bg-white p-6 rounded shadow",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Πίνακας Διαχειριστή"}),o.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Διαχείριση μελών, ανακοινώσεων και συνεδριών ψηφοφορίας."}),(0,o.jsxs)("section",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,o.jsxs)("div",{className:"p-4 border rounded",children:[o.jsx("h3",{className:"font-semibold",children:"Μέλη"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Προσθήκη / αφαίρεση / έλεγχος"})]}),(0,o.jsxs)("div",{className:"p-4 border rounded",children:[o.jsx("h3",{className:"font-semibold",children:"Ανακοινώσεις"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Δημιουργία και δημοσίευση"})]}),(0,o.jsxs)("div",{className:"p-4 border rounded",children:[o.jsx("h3",{className:"font-semibold",children:"Ψηφοφορίες"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Δημιουργία συνεδριών ψηφοφορίας"})]})]}),(0,o.jsxs)("div",{className:"mt-4 text-sm text-gray-500",children:["Logged in as: ",e?.phone]})]})})}let getServerSideProps=async e=>{let r=e.req.headers.cookie||"",t=(0,p.parse)(r),s=t.poli_token;if(!s)return{redirect:{destination:"/login",permanent:!1}};try{let e=process.env.JWT_SECRET||"dev_jwt_secret",r=u().verify(s,e);if("ADMIN"!==r.role)return{redirect:{destination:"/",permanent:!1}};let t=await x.Z.member.findUnique({where:{id:r.memberId},include:{party:!0}}),a=t?.party||null;return{props:{user:r,party:a}}}catch(e){return{redirect:{destination:"/login",permanent:!1}}}},g=(0,n.l)(s,"default"),h=(0,n.l)(s,"getStaticProps"),b=(0,n.l)(s,"getStaticPaths"),S=(0,n.l)(s,"getServerSideProps"),_=(0,n.l)(s,"config"),v=(0,n.l)(s,"reportWebVitals"),P=(0,n.l)(s,"unstable_getStaticProps"),j=(0,n.l)(s,"unstable_getStaticPaths"),f=(0,n.l)(s,"unstable_getStaticParams"),N=(0,n.l)(s,"unstable_getServerProps"),w=(0,n.l)(s,"unstable_getServerSideProps"),q=new a.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/admin",pathname:"/admin",bundlePath:"",filename:""},components:{App:d.default,Document:l.default},userland:s})},3717:(e,r,t)=>{t.d(r,{Z:()=>i});let s=require("@prisma/client"),a=global.prisma||new s.PrismaClient,i=a},4802:e=>{e.exports=require("cookie")},9344:e=>{e.exports=require("jsonwebtoken")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},997:e=>{e.exports=require("react/jsx-runtime")},1017:e=>{e.exports=require("path")},7310:e=>{e.exports=require("url")}};var r=require("../webpack-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),t=r.X(0,[859,656,664,33],()=>__webpack_exec__(7585));module.exports=t})();